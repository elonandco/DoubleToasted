(function(b,a){if(typeof exports==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define("salvattore",[],a)}else{b.salvattore=a()}}})(this,function(){window.matchMedia||(window.matchMedia=function(){var d=window.styleMedia||window.media;if(!d){var b=document.createElement("style"),f=document.getElementsByTagName("script")[0],c=null;b.type="text/css";b.id="matchmediajs-test";f.parentNode.insertBefore(b,f);c="getComputedStyle" in window&&window.getComputedStyle(b,null)||b.currentStyle;d={matchMedium:function(g){var h="@media "+g+"{ #matchmediajs-test { width: 1px; } }";if(b.styleSheet){b.styleSheet.cssText=h}else{b.textContent=h}return c.width==="1px"}}}return function(e){return{matches:d.matchMedium(e||"all"),media:e||"all"}}}());(function(){if(window.matchMedia&&window.matchMedia("all").addListener){return false}var g=window.matchMedia,c=g("only all").matches,h=false,f=0,b=[],d=function(e){clearTimeout(f);f=setTimeout(function(){for(var k=0,q=b.length;k<q;k++){var m=b[k].mql,l=b[k].listeners||[],p=g(m.media).matches;if(p!==m.matches){m.matches=p;for(var j=0,i=l.length;j<i;j++){l[j].call(window,m)}}}},30)};window.matchMedia=function(j){var k=g(j),i=[],e=0;k.addListener=function(l){if(!c){return}if(!h){h=true;window.addEventListener("resize",d,true)}if(e===0){e=b.push({mql:k,listeners:i})}i.push(l)};k.removeListener=function(m){for(var l=0,o=i.length;l<o;l++){if(i[l]===m){i.splice(l,1)}}};return k}})();(function(){var c=0;var b=["ms","moz","webkit","o"];for(var d=0;d<b.length&&!window.requestAnimationFrame;++d){window.requestAnimationFrame=window[b[d]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(f,j){var h=(new Date).getTime();var e=Math.max(0,16-(h-c));var g=window.setTimeout(function(){f(h+e)},e);c=h+e;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(f){clearTimeout(f)}}})();var a=function(g,c,h){var f={},b=[],d=function(j,i,k){if(j.dataset){j.dataset[i]=k}else{j.setAttribute("data-"+i,k)}return};f.obtain_grid_settings=function(p){var l=g.getComputedStyle(p,":before"),j=l.getPropertyValue("content").slice(1,-1),k=j.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),m,e;if(k){m=k[1];e=k[2];e=e?e.split("."):["column"]}else{k=j.match(/^\s*\.(.+)\s+(\d+)\s*$/);e=k[1];m=k[2];if(m){m=m.split(".")}}return{numberOfColumns:m,columnClasses:e}};f.add_columns=function(j,m){var e=f.obtain_grid_settings(j),t=e.numberOfColumns,s=e.columnClasses,q=new Array(+t),k=c.createDocumentFragment(),r=t,p;while(r--!==0){p="[data-columns] > *:nth-child("+t+"n-"+r+")";q.push(m.querySelectorAll(p))}q.forEach(function(u){var o=c.createElement("div"),l=c.createDocumentFragment();o.className=s.join(" ");Array.prototype.forEach.call(u,function(i){l.appendChild(i)});o.appendChild(l);k.appendChild(o)});j.appendChild(k);d(j,"columns",t)};f.remove_columns=function(n){var m=c.createRange();m.selectNodeContents(n);var q=Array.prototype.filter.call(m.extractContents().childNodes,function(i){return i instanceof g.HTMLElement});var k=q.length,j=q[0].childNodes.length,p=new Array(j*k);Array.prototype.forEach.call(q,function(i,l){Array.prototype.forEach.call(i.children,function(o,s){p[s*k+l]=o})});var e=c.createElement("div");d(e,"columns",0);p.filter(function(i){return !!i}).forEach(function(i){e.appendChild(i)});return e};f.recreate_columns=function(e){g.requestAnimationFrame(function(){f.add_columns(e,f.remove_columns(e))})};f.media_query_change=function(e){if(e.matches){Array.prototype.forEach.call(b,f.recreate_columns)}};f.get_css_rules=function(e){var j;try{j=e.sheet.cssRules||e.sheet.rules}catch(i){return[]}return j||[]};f.get_stylesheets=function(){return Array.prototype.concat.call(Array.prototype.slice.call(c.querySelectorAll("style[type='text/css']")),Array.prototype.slice.call(c.querySelectorAll("link[rel='stylesheet']")))};f.media_rule_has_columns_selector=function(e){var j=e.length,i;while(j--){i=e[j];if(i.selectorText&&i.selectorText.match(/\[data-columns\](.*)::?before$/)){return true}}return false};f.scan_media_queries=function(){var e=[];if(!g.matchMedia){return}f.get_stylesheets().forEach(function(j){Array.prototype.forEach.call(f.get_css_rules(j),function(k){if(k.media&&f.media_rule_has_columns_selector(k.cssRules)){e.push(g.matchMedia(k.media.mediaText))}})});e.forEach(function(i){i.addListener(f.media_query_change)})};f.next_element_column_index=function(v,k){var e=v.children,l=e.length,w=0,j,q,p,m=0;for(p=0;p<l;p++){j=e[p];if(!k[p].children){fragchild=0}else{fragchild=k[p].children.length}q=j.children.length+fragchild;if(w===0){w=q}if(q<w){m=p;w=q}}return m};f.create_list_of_fragments=function(k){var j=new Array(k),e=0;while(e!==k){j[e]=c.createDocumentFragment();e++}return j};f.append_elements=function(j,m){var e=j.children,k=e.length,l=f.create_list_of_fragments(k);m.forEach(function(p){var o=f.next_element_column_index(j,l);l[o].appendChild(p)});Array.prototype.forEach.call(e,function(i,o){i.appendChild(l[o])})};f.prepend_elements=function(t,m){var p=t.children,r=p.length,k=f.create_list_of_fragments(r),j=r-1;m.forEach(function(i){var l=k[j];l.insertBefore(i,l.firstChild);if(j===0){j=r-1}else{j--}});Array.prototype.forEach.call(p,function(i,l){i.insertBefore(k[l],i.firstChild)});var q=c.createDocumentFragment(),e=m.length%r;while(e--!==0){q.appendChild(t.lastChild)}t.insertBefore(q,t.firstChild)};f.register_grid=function(j){if(g.getComputedStyle(j).display==="none"){return}var i=c.createRange();i.selectNodeContents(j);var e=c.createElement("div");e.appendChild(i.extractContents());d(e,"columns",0);f.add_columns(j,e);b.push(j)};f.init=function(){var j=c.createElement("style");j.innerHTML="[data-columns]::before{visibility:hidden;position:absolute;font-size:1px;}";c.head.appendChild(j);var e=c.querySelectorAll("[data-columns]");Array.prototype.forEach.call(e,f.register_grid);f.scan_media_queries()};f.init();return{append_elements:f.append_elements,prepend_elements:f.prepend_elements,register_grid:f.register_grid}}(window,window.document);return a});