// Initialized Admin Actions for "Feature This" functionality
jQuery("#feature-this-list").sortable({update:function(e,t){jQuery(".spinner.dt-manage-featured").css({display:"inline-block"}),prev=jQuery(t.item).prev().attr("order"),next=jQuery(t.item).next().attr("order"),post_id=jQuery(t.item).attr("postid"),new_order=prev&&next?(parseInt(prev)+parseInt(next))/2:prev?parseInt(prev)-1e3:jQuery("#feature-this-list").attr("timestamp"),console.log(new_order,prev,next,post_id);var r={action:"dt_set_feature_this",post_id:post_id,order:new_order};jQuery("#feature-this-list > tr").removeClass("alternate"),jQuery("#feature-this-list > tr:even").addClass("alternate"),jQuery.post(ajaxurl,r,function(){jQuery(".spinner.dt-manage-featured").css({display:"none"}),jQuery(t.item).attr("order",new_order)})}}),jQuery(".feature-this-post").click(function(e){e.preventDefault(),el=jQuery(this),order="newest",el.parent().children(".spinner").css({display:"inline-block"}),post_id=el.parents(".hentry").attr("id").split("-")[1],el.hasClass("featured")&&(order=0);var t={action:"dt_set_feature_this",post_id:post_id,order:order};jQuery.post(ajaxurl,t,function(){jQuery(".spinner").css({display:"none"}),0==order?(jQuery(el).removeClass("featured"),jQuery(el).text("Feature This")):jQuery(el).text("Featured")})}),jQuery(".dt-feature-remove").click(function(e){e.preventDefault(),el=jQuery(this),el.parent().children(".spinner").css({display:"inline-block"}),post_id=el.parents(".hentry").attr("postid");var t={action:"dt_set_feature_this",post_id:post_id,order:0};jQuery.post(ajaxurl,t,function(){jQuery(".spinner").css({display:"none"}),el.parents(".hentry").fadeOut(),jQuery("#feature-this-list > tr").removeClass("alternate"),jQuery("#feature-this-list > tr:even").addClass("alternate")})});